---
layout: post
title: 关于UI框架的思考
category: 技术
tags: 编程思想
previousTitle: ''
previousUrl: ''
nextTitle: ''
nextUrl: ''
description:
---

最近看了几个GUI框架，包括Android、GTK+、SG2D的UI、白鹭引擎的、Qt5等等,是我对GUI框架有了进一步理解,也有了一些自己的想法.

<br>

### 关于组件

我发现大多数的UI框架为了开发者使用起来方便，都对各种UI组件进行了封装,并为这些组件定义许多个类，比如按钮、列表、复选框等。这样做虽然开发起来快速，但是存在一个通用的弊端——封装的组件越高级，自定义样式的灵活性越低。

我希望有这样一个UI框架，只提供最基本的可定制的低级组件，有文字、图片、分组就够了。我们可以使用这三种基本组件合成各种更高级的组件,更好的发挥我的创造力。

<br>

### 关于缩放

UI框架对缩放的处理决定着一个UI界面对不同分辨率的显示效果，很大程度上影响用户视觉体验。大多数的UI框架都有处理缩放的方式。

#### 全矢量缩放

Qt5、GTK、Cocoa等系统级别的UI框架使用矢量图绘制GUI,这种缩放方式能很好地还原设计时的原型，并且效率较高，缩放效果很好，但一般只针对某一特定的平台，跨平台（Qt5能跨平台，不太容易做到,同时大多数使用矢量图绘制GUI的框架并部支持使用自定义的矢量图形,仅仅能使用其框架中定义的组件.

#### 九宫格缩放

另一种被称为“九宫格图片缩放”的方式被广泛应用，这种缩放方式是对图片进行局部缩放，或对图片不同区域进行不同比率的缩放，从而达到较好的缩放效果，能使很小尺寸的图片放大后看上去不会失真。但这种方式也有它的缺点。进行九宫格缩放的图片资源必须符合一定的规则才能达到预期的效果（在圆角矩形的图片上应用得比较多），资源不规范或设置缩放区域不准确时很容易变形。

我希望有这样一个UI框架，能够支持多种缩放方式，提供一套完善的缩放解决方案。

<br>

### 关于适用场合

现在主流的UI框架都为其所属的开发框架或游戏引擎所设计，比如NGUI只能在Unity中使用、Cocoa的UI只能在OSX上工作，即便是具备跨平台的Qt5的UI，也必须在你使用Qt的情况下才能显其神通。似乎UI框架并不值得作为一个独立的框架而设计,至少现在很少有独立的UI框架。

我希望有这样一个UI框架，能够不受开发框架(游戏引擎)、绘图方式、操作系统的限制，能在我使用的任何游戏引擎、开发框架和我常用的操作系统上使用。

<br>

### 关于事件

看过一些UI框架，都有自己的事件处理方式。我个人认为SG2D、白鹭引擎的事件分发机制和AngularJS中的双向数据绑定的MVC模式比较人性化。当然Android中的事件监听方式也不错的，至于Cocos2d-x中的那套我就用不太习惯了。

我希望有这样一个UI框架，能有一套健全的事件分发机制，最好能支持MVC模式。

<br>

### 关于使用方式和性能

HTML5 + CSS3 的UI设计方式非常符合我第一点要求，提供简单组件，能有强大扩展能力的方案，因此这种方式能做出的效果是非常炫的，但是这些很炫的效果在移动平台上表现就不怎么样，真是美中不足啊！

我希望有这样一个UI框架，能用 HTML+CSS 或类似的方式进行开发，并支持硬件加速绘图，提供更好的用户体验。

<br>
<br>

## 如何构建一个理想中的UI框架

这是一个简单的、独立的、出色的UI框架，它现在还不存在。如果你知道有这样的UI框架请一定要告诉我!

那么该如何构建一个这样的UI框架呢？下图是我个人的理解：

<img class="post_center_img_noborder" src="/assets/img/ui/thinking/UI架构解析.svg">


基于这样的方式，我们便可以通过最基本的容器、文字和图形来创建各式各样的组件，然后再使用组件来构建复杂的UI界面。

<br>

我解析了一下iOS版支付宝的主界面，下图中的按钮如果被定义为 `包含一个图形和一个文字的容器` 的话，那复用率是不是会很高呢！

<img class="post_center_img_noborder" src="/assets/img/ui/thinking/支付宝主界面分解.png">

图中红色、绿色和黄色分别代表设计图中的文字、图形和容器。

UI树大概是这个样子的

<img class="post_center_img" src="/assets/img/ui/thinking/uitree.png">
