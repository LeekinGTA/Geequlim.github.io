---
layout: post
title: 创建BGFX渲染窗口
category: 'BGFX'
tags: 'bgfx'
previousTitle: '创建BGFX渲染窗口'
previousUrl: '/2015/11/06/创建BGFX渲染窗口.html'
nextTitle: ''
nextUrl: ''
description:
---

## 图形渲染管线(Pipeline)

现代图形渲染库大都使用图形渲染管线将3D图形数据转换为
2D屏幕像素阵列，这一过程也是大部分图形渲染工作的核心工作。
所谓图形渲染管线，实际上指的是一堆原始图形数据经过一步接一步
地处理，最终将这些数据转化为可以显示到屏幕的过程，
人们因其流水线式的工作方式将其称之为渲染管线。图形渲染管线可以被划分为两个主要部分：第一个部分把你的3D坐标转换为2D坐标，第二部分是把2D坐标转变为实际的有颜色的像素。

图形渲染管线接收一组3D坐标，然后把它们转变为你屏幕上的有色2D像素，这一过程可以被划分为几个阶段，每个阶段需要把前一个阶段的输出作为输入。所有这些阶段都是高度专门化的(它们有一个特定的函数)，它们能简单地并行执行。由于它们的并行执行特性，当今大多数显卡都有成千上万的小处理核心，在GPU上为每一个(渲染管线)阶段运行各自的小程序，从而在图形渲染管线中快速处理你的数据。这些小程序叫做**着色器(Shader)** 。

有些着色器允许开发者自己配置，我们可以用自己写的着色器替换默认的。这样我们就可以更细致地控制图形渲染管线中的特定部分了，因为它们运行在GPU上，所以它们会节约宝贵的CPU时间。BGFX的着色器是用类似OpenGL的着色器语言GLSL(OpenGL Shading Language, GLSL)写成的，因为现在作者还没有对这门着色器语言起一个名字，我们现在先把这门简单的着色器语言称之为BSL（BGFX Shading Language）吧，如果以后这个新生儿有户口了我们在改过来。我们在下一节会花更多时间研究它。

下图是OpenGL的图形渲染管线示意图，其他API的图形渲染管线与之类似，着色器的名称可能会有所不同。BGFX也是使用这样图图形渲染管线进行图形渲染工作的。

<img class="box_content" src="/assets/img/blog/LearnOpenGL/01 Getting started/OpenGL_pipline_cn.png"/>

如你所见，图形渲染管线包含很多部分，每个都是将你的顶点数据转变为最后渲染出来的像素这个大过程中的一个特定阶段。我们会概括性地解释渲染管线的每个部分，从而使你对图形渲染管线的工作方式有个大概了解。

<div class="orange_box">
	<p class="orange_title">BSL不能直接在硬件上执行</p>
	<p class="box_content">
BSL是一门通用着色器语言，但是它并没有得到硬件厂商的支持。也就是说，BSL无法直接在GPU上作为着色器执行。BSL同BGFX一样，为了跨平台，提高开发效率而设计开发的，因此我们只要使用BSL写一遍着着色器程序，然后使用着色器编译器<b>shaderc</b>将其编译成各个平台的原始着色器，通过这种方式就做的跨平台。目前<b>shaderc</b>支持将BSL着色器程序编译成GLSL、HLSL、GLSLES和Metal的着色器程序，同时Karadžić称未来会在第一时间支持Vulkan。
	</p>
</div>
